{"ast":null,"code":"var _jsxFileName = \"/Users/chellypeng/workspace/Ft-Official-Website/ft-offical-website/src/modules/delivery/DeliveryHeader.js\";\n// =================================================================\n// Program: DeliveryHeader.js - the header of the home of the \n//          delivery\n// Author : Bill Huang\n// Date   : Oct 19 - Dec 18, 2019\n// =================================================================\nimport React from 'react';\nimport Nav from 'react-bootstrap/Nav';\nimport Navbar from 'react-bootstrap/Navbar';\nimport ftDeliveryLogoTransparent from '../../assets/imgs/icon/AntuanDelivery48@2x.png';\nimport languageSwitchIcon from '../../assets/imgs/icon/language-switch-icon@2x.png';\nimport ftDeliveryLogoColor from '../../assets/imgs/icon/delivery/fantuan-delivery-logo-color@2x.png';\nimport Button from 'react-bootstrap/Button';\nimport { connect } from 'react-redux';\nimport { setLocale } from '../../actions/locale';\nimport { FormattedMessage } from 'react-intl';\nimport './DeliveryHeader.css';\n\nclass DeliveryHeader extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.switchLocale = () => {\n      this.props.lang === 'en' ? this.props.setLocale('zh') : this.props.setLocale('en');\n    };\n\n    this.state = {\n      isTop: true,\n      widthOfWin: window.innerWidth,\n      heightOfWin: window.innerHeight,\n      heightToTop: window.scrollY,\n      opacityVar: 100\n    };\n    this.handleScroll = this.handleScroll.bind(this);\n    this.updateWindowDimensions = this.updateWindowDimensions.bind(this);\n  }\n\n  componentDidMount() {\n    this.updateWindowDimensions();\n    window.addEventListener(\"resize\", this.updateWindowDimensions.bind(this));\n    window.addEventListener('scroll', this.handleScroll);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener(\"resize\", this.updateWindowDimensions.bind(this));\n    window.removeEventListener('scroll', this.handleScroll);\n  }\n\n  handleScroll(event) {\n    const isTop = window.scrollY < 200;\n    this.setState({\n      heightToTop: window.scrollY\n    });\n\n    if (this.state.heightToTop <= 30) {\n      this.setState({\n        opacityVar: 1\n      });\n    } else if (this.state.heightToTop > 30 && this.state.heightToTop <= 200) {\n      this.setState({\n        opacityVar: Math.abs(0.08 - 1 / 200 * this.state.heightToTop)\n      });\n\n      if (this.state.opacityVar < 0.8) {\n        this.setState({\n          opacityVar: 0.8\n        });\n      }\n    } else {\n      this.setState({\n        opacityVar: 1\n      });\n    }\n\n    if (isTop !== this.state.isTop) {\n      this.setState({\n        isTop\n      });\n    } // const fadeHeitht = 400;\n    // this.setState({heightToTop: window.scrollY});\n    // if (this.state.heightToTop > 0 && this.state.heightToTop <= fadeHeitht) {\n    //   this.setState({opacityVar: 1 - (1/fadeHeitht) * this.state.heightToTop});\n    // } else \n    //   this.setState({opacityVar: 1});\n\n  }\n\n  updateWindowDimensions() {\n    this.setState({\n      widthOfWin: window.innerWidth,\n      heightofWin: window.innerHeight\n    });\n  }\n\n  render() {\n    const lang = this.props.lang;\n    console.log('width: ' + this.state.widthOfWin);\n    console.log('height: ' + this.state.heightOfWin);\n    console.log('height to top: ' + this.state.heightToTop); // 575px\n    // set the source of the image\n\n    let srcLogoImage = ftDeliveryLogoColor; // set the color of the menu text\n\n    let navLinkStyle = {\n      color: 'black'\n    }; // set the default background color for header\n\n    let bgDefault = 'dark';\n    let fdHeaderBg = 'fd-header-bg-home';\n    let fdHeaderContent = 'fd-header-content-home';\n    let variantSelect = bgDefault;\n\n    switch (this.props.callerName) {\n      case 'home':\n        fdHeaderBg = 'fd-header-bg-home';\n        fdHeaderContent = 'fd-header-content-home';\n        bgDefault = '#062236';\n        if (this.state.heightToTop >= 200) bgDefault = 'white'; // bgDefault = ('light');\n        // if (this.state.isTop === true) {\n\n        if (this.state.heightToTop < 200) {\n          if (this.state.widthOfWin >= 576) {\n            // variantSelect = ('#062236');\n            variantSelect = bgDefault;\n          } else {\n            variantSelect = 'dark';\n          }\n        } else {\n          // variantSelect = ('light');\n          variantSelect = 'white';\n        }\n\n        if (this.state.heightToTop < 200) navLinkStyle = {\n          color: 'white'\n        };\n        if (this.state.heightToTop < 200) srcLogoImage = ftDeliveryLogoTransparent;\n        break;\n\n      case 'partner':\n        fdHeaderBg = 'fd-header-bg-partner';\n        fdHeaderContent = 'fd-header-content-partner';\n        bgDefault = 'white';\n        variantSelect = 'dark';\n        break;\n\n      case 'deliver':\n        fdHeaderBg = 'fd-header-bg-deliver';\n        fdHeaderContent = 'fd-header-content-deliver';\n        bgDefault = 'white';\n        variantSelect = 'dark';\n        break;\n\n      case 'faq':\n        fdHeaderBg = 'fd-header-bg-faq';\n        fdHeaderContent = 'fd-header-content-faq';\n        bgDefault = 'white';\n        variantSelect = 'dark';\n    }\n\n    fdHeaderBg = fdHeaderBg + ' ';\n    console.log('caller: ' + fdHeaderBg);\n    console.log('variant: ' + variantSelect); // set opacity of header\n\n    let navBarStyle = {\n      opacity: this.state.opacityVar\n    };\n    console.log('opacity: ' + navBarStyle.opacity);\n    return React.createElement(React.Fragment, null, React.createElement(Navbar, {\n      className: fdHeaderBg,\n      style: navBarStyle,\n      collapseOnSelect: true,\n      expand: \"sm\",\n      bg: bgDefault,\n      variant: variantSelect,\n      sticky: \"top\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: fdHeaderContent,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173\n      },\n      __self: this\n    }, React.createElement(Navbar.Brand, {\n      className: \"fd-header-logo\",\n      href: \"/delivery\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      className: \"fd-header-logo-img\",\n      src: srcLogoImage,\n      width: \"151px\",\n      height: \"33px\",\n      className: \"d-inline-block align-center\",\n      alt: \"Antuan Delivery\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175\n      },\n      __self: this\n    })), React.createElement(Navbar.Toggle, {\n      className: \"fd-header-toggle\",\n      \"aria-controls\": \"responsive-navbar-nav\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181\n      },\n      __self: this\n    }), React.createElement(Navbar.Collapse, {\n      id: \"responsive-navbar-nav\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182\n      },\n      __self: this\n    }, React.createElement(Nav, {\n      className: \"fd-header-nav mr-auto justify-content-end\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183\n      },\n      __self: this\n    }, React.createElement(Nav.Link, {\n      style: navLinkStyle,\n      href: \"/partner\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184\n      },\n      __self: this\n    }, React.createElement(FormattedMessage, {\n      id: \"fd_header_partner\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184\n      },\n      __self: this\n    })), React.createElement(Nav.Link, {\n      style: navLinkStyle,\n      href: \"/deliver\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185\n      },\n      __self: this\n    }, React.createElement(FormattedMessage, {\n      id: \"fd_header_deliver\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185\n      },\n      __self: this\n    })), React.createElement(Nav.Link, {\n      style: navLinkStyle,\n      href: \"###\",\n      onClick: this.switchLocale,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      className: \"fd-header-language-icon\",\n      src: languageSwitchIcon,\n      width: \"18px\",\n      height: \"18px\",\n      alt: \"language switch\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187\n      },\n      __self: this\n    }), React.createElement(FormattedMessage, {\n      id: \"fd_header_language\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191\n      },\n      __self: this\n    })))))));\n  }\n\n}\n\nfunction mapStateToProps(state) {\n  return {\n    lang: state.locale.lang\n  };\n}\n\nexport default connect(mapStateToProps, {\n  setLocale\n})(DeliveryHeader);","map":{"version":3,"sources":["/Users/chellypeng/workspace/Ft-Official-Website/ft-offical-website/src/modules/delivery/DeliveryHeader.js"],"names":["React","Nav","Navbar","ftDeliveryLogoTransparent","languageSwitchIcon","ftDeliveryLogoColor","Button","connect","setLocale","FormattedMessage","DeliveryHeader","Component","constructor","props","switchLocale","lang","state","isTop","widthOfWin","window","innerWidth","heightOfWin","innerHeight","heightToTop","scrollY","opacityVar","handleScroll","bind","updateWindowDimensions","componentDidMount","addEventListener","componentWillUnmount","removeEventListener","event","setState","Math","abs","heightofWin","render","console","log","srcLogoImage","navLinkStyle","color","bgDefault","fdHeaderBg","fdHeaderContent","variantSelect","callerName","navBarStyle","opacity","mapStateToProps","locale"],"mappings":";AAAA;AACA;AACA;AACA;AACA;AACA;AAEA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,GAAP,MAAgB,qBAAhB;AACA,OAAOC,MAAP,MAAmB,wBAAnB;AACA,OAAOC,yBAAP,MAAsC,gDAAtC;AACA,OAAOC,kBAAP,MAA+B,oDAA/B;AACA,OAAOC,mBAAP,MAAgC,oEAAhC;AACA,OAAOC,MAAP,MAAmB,wBAAnB;AAEA,SAAQC,OAAR,QAAsB,aAAtB;AACA,SAAQC,SAAR,QAAwB,sBAAxB;AAEA,SAASC,gBAAT,QAAgC,YAAhC;AAEA,OAAO,sBAAP;;AAEA,MAAMC,cAAN,SAA6BV,KAAK,CAACW,SAAnC,CAA6C;AAE3CC,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,UAAMA,KAAN;;AADiB,SAsDnBC,YAtDmB,GAsDJ,MAAM;AACnB,WAAKD,KAAL,CAAWE,IAAX,KAAoB,IAApB,GACE,KAAKF,KAAL,CAAWL,SAAX,CAAqB,IAArB,CADF,GAC6B,KAAKK,KAAL,CAAWL,SAAX,CAAqB,IAArB,CAD7B;AAED,KAzDkB;;AAEjB,SAAKQ,KAAL,GAAa;AACXC,MAAAA,KAAK,EAAE,IADI;AAEXC,MAAAA,UAAU,EAAEC,MAAM,CAACC,UAFR;AAGXC,MAAAA,WAAW,EAAEF,MAAM,CAACG,WAHT;AAIXC,MAAAA,WAAW,EAAEJ,MAAM,CAACK,OAJT;AAKXC,MAAAA,UAAU,EAAE;AALD,KAAb;AAOA,SAAKC,YAAL,GAAoB,KAAKA,YAAL,CAAkBC,IAAlB,CAAuB,IAAvB,CAApB;AACA,SAAKC,sBAAL,GAA8B,KAAKA,sBAAL,CAA4BD,IAA5B,CAAiC,IAAjC,CAA9B;AACD;;AAEDE,EAAAA,iBAAiB,GAAG;AAClB,SAAKD,sBAAL;AACAT,IAAAA,MAAM,CAACW,gBAAP,CAAwB,QAAxB,EAAkC,KAAKF,sBAAL,CAA4BD,IAA5B,CAAiC,IAAjC,CAAlC;AACAR,IAAAA,MAAM,CAACW,gBAAP,CAAwB,QAAxB,EAAkC,KAAKJ,YAAvC;AACD;;AAEDK,EAAAA,oBAAoB,GAAG;AACrBZ,IAAAA,MAAM,CAACa,mBAAP,CAA2B,QAA3B,EAAqC,KAAKJ,sBAAL,CAA4BD,IAA5B,CAAiC,IAAjC,CAArC;AACAR,IAAAA,MAAM,CAACa,mBAAP,CAA2B,QAA3B,EAAqC,KAAKN,YAA1C;AACD;;AAEDA,EAAAA,YAAY,CAACO,KAAD,EAAQ;AAClB,UAAMhB,KAAK,GAAGE,MAAM,CAACK,OAAP,GAAiB,GAA/B;AACA,SAAKU,QAAL,CAAc;AAACX,MAAAA,WAAW,EAAEJ,MAAM,CAACK;AAArB,KAAd;;AACA,QAAI,KAAKR,KAAL,CAAWO,WAAX,IAAyB,EAA7B,EAAiC;AAC/B,WAAKW,QAAL,CAAc;AAACT,QAAAA,UAAU,EAAE;AAAb,OAAd;AACD,KAFD,MAEO,IAAI,KAAKT,KAAL,CAAWO,WAAX,GAAyB,EAAzB,IAA+B,KAAKP,KAAL,CAAWO,WAAX,IAA0B,GAA7D,EAAkE;AACvE,WAAKW,QAAL,CAAc;AAACT,QAAAA,UAAU,EAAEU,IAAI,CAACC,GAAL,CAAS,OAAM,IAAE,GAAH,GAAU,KAAKpB,KAAL,CAAWO,WAAnC;AAAb,OAAd;;AACA,UAAI,KAAKP,KAAL,CAAWS,UAAX,GAAwB,GAA5B,EAAiC;AAC/B,aAAKS,QAAL,CAAc;AAACT,UAAAA,UAAU,EAAE;AAAb,SAAd;AACD;AACF,KALM,MAKA;AACL,WAAKS,QAAL,CAAc;AAACT,QAAAA,UAAU,EAAE;AAAb,OAAd;AACD;;AACD,QAAIR,KAAK,KAAK,KAAKD,KAAL,CAAWC,KAAzB,EAAgC;AAC5B,WAAKiB,QAAL,CAAc;AAAEjB,QAAAA;AAAF,OAAd;AACH,KAfiB,CAiBlB;AACA;AACA;AACA;AACA;AACA;;AAED;;AAEDW,EAAAA,sBAAsB,GAAG;AACvB,SAAKM,QAAL,CAAc;AAAEhB,MAAAA,UAAU,EAAEC,MAAM,CAACC,UAArB;AAAiCiB,MAAAA,WAAW,EAAElB,MAAM,CAACG;AAArD,KAAd;AACD;;AAODgB,EAAAA,MAAM,GAAG;AAAA,UAEAvB,IAFA,GAEQ,KAAKF,KAFb,CAEAE,IAFA;AAIPwB,IAAAA,OAAO,CAACC,GAAR,CAAY,YAAU,KAAKxB,KAAL,CAAWE,UAAjC;AACAqB,IAAAA,OAAO,CAACC,GAAR,CAAY,aAAW,KAAKxB,KAAL,CAAWK,WAAlC;AACAkB,IAAAA,OAAO,CAACC,GAAR,CAAY,oBAAkB,KAAKxB,KAAL,CAAWO,WAAzC,EANO,CAOP;AAEA;;AACA,QAAIkB,YAAY,GAAGpC,mBAAnB,CAVO,CAYP;;AACA,QAAIqC,YAAY,GAAG;AAACC,MAAAA,KAAK,EAAE;AAAR,KAAnB,CAbO,CAeP;;AACA,QAAIC,SAAS,GAAI,MAAjB;AACA,QAAIC,UAAU,GAAI,mBAAlB;AACA,QAAIC,eAAe,GAAI,wBAAvB;AACA,QAAIC,aAAa,GAAGH,SAApB;;AAEA,YAAO,KAAK/B,KAAL,CAAWmC,UAAlB;AACE,WAAK,MAAL;AACEH,QAAAA,UAAU,GAAI,mBAAd;AACAC,QAAAA,eAAe,GAAI,wBAAnB;AACAF,QAAAA,SAAS,GAAI,SAAb;AAEA,YAAI,KAAK5B,KAAL,CAAWO,WAAX,IAA0B,GAA9B,EACEqB,SAAS,GAAI,OAAb,CANJ,CAOI;AACF;;AACA,YAAI,KAAK5B,KAAL,CAAWO,WAAX,GAAyB,GAA7B,EAAkC;AAChC,cAAI,KAAKP,KAAL,CAAWE,UAAX,IAAyB,GAA7B,EAAkC;AAChC;AACA6B,YAAAA,aAAa,GAAGH,SAAhB;AACD,WAHD,MAGO;AACLG,YAAAA,aAAa,GAAI,MAAjB;AACD;AACF,SAPD,MAOO;AACL;AACAA,UAAAA,aAAa,GAAI,OAAjB;AACD;;AAED,YAAI,KAAK/B,KAAL,CAAWO,WAAX,GAAyB,GAA7B,EACEmB,YAAY,GAAG;AAACC,UAAAA,KAAK,EAAE;AAAR,SAAf;AAEF,YAAI,KAAK3B,KAAL,CAAWO,WAAX,GAAyB,GAA7B,EACEkB,YAAY,GAAGtC,yBAAf;AACF;;AAEF,WAAK,SAAL;AACE0C,QAAAA,UAAU,GAAI,sBAAd;AACAC,QAAAA,eAAe,GAAI,2BAAnB;AACAF,QAAAA,SAAS,GAAI,OAAb;AACAG,QAAAA,aAAa,GAAI,MAAjB;AACA;;AAEF,WAAK,SAAL;AACEF,QAAAA,UAAU,GAAI,sBAAd;AACAC,QAAAA,eAAe,GAAI,2BAAnB;AACAF,QAAAA,SAAS,GAAI,OAAb;AACAG,QAAAA,aAAa,GAAI,MAAjB;AACA;;AAEF,WAAK,KAAL;AACEF,QAAAA,UAAU,GAAI,kBAAd;AACAC,QAAAA,eAAe,GAAI,uBAAnB;AACAF,QAAAA,SAAS,GAAI,OAAb;AACAG,QAAAA,aAAa,GAAI,MAAjB;AA/CJ;;AAkDAF,IAAAA,UAAU,GAAGA,UAAU,GAAG,GAA1B;AAEAN,IAAAA,OAAO,CAACC,GAAR,CAAY,aAAWK,UAAvB;AACAN,IAAAA,OAAO,CAACC,GAAR,CAAY,cAAYO,aAAxB,EA1EO,CA4EP;;AACA,QAAIE,WAAW,GAAG;AAChBC,MAAAA,OAAO,EAAE,KAAKlC,KAAL,CAAWS;AADJ,KAAlB;AAGAc,IAAAA,OAAO,CAACC,GAAR,CAAY,cAAYS,WAAW,CAACC,OAApC;AAEA,WACE,0CAEI,oBAAC,MAAD;AAAQ,MAAA,SAAS,EAAEL,UAAnB;AAA+B,MAAA,KAAK,EAAEI,WAAtC;AAAmD,MAAA,gBAAgB,MAAnE;AAAoE,MAAA,MAAM,EAAC,IAA3E;AACE,MAAA,EAAE,EAAEL,SADN;AAEE,MAAA,OAAO,EAAEG,aAFX;AAGE,MAAA,MAAM,EAAC,KAHT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAIE;AAAK,MAAA,SAAS,EAAED,eAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,MAAD,CAAQ,KAAR;AAAc,MAAA,SAAS,EAAC,gBAAxB;AAAyC,MAAA,IAAI,EAAC,WAA9C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAK,MAAA,SAAS,EAAC,oBAAf;AAAoC,MAAA,GAAG,EAAEL,YAAzC;AACA,MAAA,KAAK,EAAC,OADN;AAEE,MAAA,MAAM,EAAC,MAFT;AAGE,MAAA,SAAS,EAAC,6BAHZ;AAIE,MAAA,GAAG,EAAC,iBAJN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,CADF,EAQE,oBAAC,MAAD,CAAQ,MAAR;AAAe,MAAA,SAAS,EAAC,kBAAzB;AAA4C,uBAAc,uBAA1D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MARF,EASE,oBAAC,MAAD,CAAQ,QAAR;AAAiB,MAAA,EAAE,EAAC,uBAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,GAAD;AAAK,MAAA,SAAS,EAAC,2CAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,GAAD,CAAK,IAAL;AAAU,MAAA,KAAK,EAAEC,YAAjB;AAA+B,MAAA,IAAI,EAAC,UAApC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAA+C,oBAAC,gBAAD;AAAkB,MAAA,EAAE,EAAC,mBAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAA/C,CADF,EAEE,oBAAC,GAAD,CAAK,IAAL;AAAU,MAAA,KAAK,EAAEA,YAAjB;AAA+B,MAAA,IAAI,EAAC,UAApC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAA+C,oBAAC,gBAAD;AAAkB,MAAA,EAAE,EAAC,mBAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAA/C,CAFF,EAGE,oBAAC,GAAD,CAAK,IAAL;AAAU,MAAA,KAAK,EAAEA,YAAjB;AAA+B,MAAA,IAAI,EAAC,KAApC;AAA0C,MAAA,OAAO,EAAE,KAAK5B,YAAxD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAK,MAAA,SAAS,EAAC,yBAAf;AAAyC,MAAA,GAAG,EAAEV,kBAA9C;AACE,MAAA,KAAK,EAAC,MADR;AAEE,MAAA,MAAM,EAAC,MAFT;AAGE,MAAA,GAAG,EAAC,iBAHN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,EAKE,oBAAC,gBAAD;AAAkB,MAAA,EAAE,EAAC,oBAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MALF,CAHF,CADF,CATF,CAJF,CAFJ,CADF;AAkCD;;AAjL0C;;AAoL7C,SAAS+C,eAAT,CAAyBnC,KAAzB,EAA+B;AAC7B,SAAM;AACJD,IAAAA,IAAI,EAAEC,KAAK,CAACoC,MAAN,CAAarC;AADf,GAAN;AAGD;;AACD,eAAeR,OAAO,CAAC4C,eAAD,EAAkB;AAAC3C,EAAAA;AAAD,CAAlB,CAAP,CAAsCE,cAAtC,CAAf","sourcesContent":["// =================================================================\n// Program: DeliveryHeader.js - the header of the home of the \n//          delivery\n// Author : Bill Huang\n// Date   : Oct 19 - Dec 18, 2019\n// =================================================================\n\nimport React from 'react';\nimport Nav from 'react-bootstrap/Nav';\nimport Navbar from 'react-bootstrap/Navbar';\nimport ftDeliveryLogoTransparent from '../../assets/imgs/icon/AntuanDelivery48@2x.png';\nimport languageSwitchIcon from '../../assets/imgs/icon/language-switch-icon@2x.png';\nimport ftDeliveryLogoColor from '../../assets/imgs/icon/delivery/fantuan-delivery-logo-color@2x.png';\nimport Button from 'react-bootstrap/Button';\n\nimport {connect} from 'react-redux';\nimport {setLocale} from '../../actions/locale';\n\nimport { FormattedMessage} from 'react-intl';\n\nimport './DeliveryHeader.css';\n\nclass DeliveryHeader extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isTop: true,\n      widthOfWin: window.innerWidth,\n      heightOfWin: window.innerHeight,\n      heightToTop: window.scrollY,\n      opacityVar: 100,\n    };\n    this.handleScroll = this.handleScroll.bind(this);\n    this.updateWindowDimensions = this.updateWindowDimensions.bind(this);\n  }\n\n  componentDidMount() {\n    this.updateWindowDimensions();\n    window.addEventListener(\"resize\", this.updateWindowDimensions.bind(this));\n    window.addEventListener('scroll', this.handleScroll);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener(\"resize\", this.updateWindowDimensions.bind(this));\n    window.removeEventListener('scroll', this.handleScroll);\n  }\n\n  handleScroll(event) {\n    const isTop = window.scrollY < 200;\n    this.setState({heightToTop: window.scrollY});\n    if (this.state.heightToTop<= 30) {\n      this.setState({opacityVar: 1});\n    } else if (this.state.heightToTop > 30 && this.state.heightToTop <= 200) {\n      this.setState({opacityVar: Math.abs(0.08-(1/200) * this.state.heightToTop)});\n      if (this.state.opacityVar < 0.8) {\n        this.setState({opacityVar: 0.8});\n      }\n    } else {\n      this.setState({opacityVar: 1});\n    }\n    if (isTop !== this.state.isTop) {\n        this.setState({ isTop })\n    }\n\n    // const fadeHeitht = 400;\n    // this.setState({heightToTop: window.scrollY});\n    // if (this.state.heightToTop > 0 && this.state.heightToTop <= fadeHeitht) {\n    //   this.setState({opacityVar: 1 - (1/fadeHeitht) * this.state.heightToTop});\n    // } else \n    //   this.setState({opacityVar: 1});\n\n  }  \n  \n  updateWindowDimensions() {\n    this.setState({ widthOfWin: window.innerWidth, heightofWin: window.innerHeight });\n  }\n\n  switchLocale = () => {\n    this.props.lang === 'en' ?\n      this.props.setLocale('zh'):this.props.setLocale('en');\n  }\n\n  render() {\n\n    const {lang} = this.props;\n\n    console.log('width: '+this.state.widthOfWin);\n    console.log('height: '+this.state.heightOfWin);\n    console.log('height to top: '+this.state.heightToTop);\n    // 575px\n\n    // set the source of the image\n    let srcLogoImage = ftDeliveryLogoColor;\n\n    // set the color of the menu text\n    let navLinkStyle = {color: 'black', };\n    \n    // set the default background color for header\n    let bgDefault = ('dark');\n    let fdHeaderBg = ('fd-header-bg-home');\n    let fdHeaderContent = ('fd-header-content-home');\n    let variantSelect = bgDefault;\n\n    switch(this.props.callerName){\n      case 'home':\n        fdHeaderBg = ('fd-header-bg-home');\n        fdHeaderContent = ('fd-header-content-home');\n        bgDefault = ('#062236');\n\n        if (this.state.heightToTop >= 200)\n          bgDefault = ('white');\n          // bgDefault = ('light');\n        // if (this.state.isTop === true) {\n        if (this.state.heightToTop < 200) {\n          if (this.state.widthOfWin >= 576) {\n            // variantSelect = ('#062236');\n            variantSelect = bgDefault;\n          } else {\n            variantSelect = ('dark');\n          }\n        } else {\n          // variantSelect = ('light');\n          variantSelect = ('white');\n        }\n    \n        if (this.state.heightToTop < 200)\n          navLinkStyle = {color: 'white', }\n      \n        if (this.state.heightToTop < 200)\n          srcLogoImage = ftDeliveryLogoTransparent;\n        break;\n\n      case 'partner':\n        fdHeaderBg = ('fd-header-bg-partner');\n        fdHeaderContent = ('fd-header-content-partner');\n        bgDefault = ('white');\n        variantSelect = ('dark');\n        break;\n\n      case 'deliver':\n        fdHeaderBg = ('fd-header-bg-deliver');\n        fdHeaderContent = ('fd-header-content-deliver');\n        bgDefault = ('white');\n        variantSelect = ('dark');\n        break;\n\n      case 'faq':\n        fdHeaderBg = ('fd-header-bg-faq');\n        fdHeaderContent = ('fd-header-content-faq');\n        bgDefault = ('white');\n        variantSelect = ('dark');\n    }\n\n    fdHeaderBg = fdHeaderBg + ' ';\n\n    console.log('caller: '+fdHeaderBg);\n    console.log('variant: '+variantSelect);\n\n    // set opacity of header\n    let navBarStyle = {\n      opacity: this.state.opacityVar,\n    };\n    console.log('opacity: '+navBarStyle.opacity);\n\n    return (\n      <>\n\n          <Navbar className={fdHeaderBg} style={navBarStyle} collapseOnSelect expand=\"sm\" \n            bg={bgDefault}\n            variant={variantSelect}\n            sticky=\"top\">\n            <div className={fdHeaderContent}>\n              <Navbar.Brand className=\"fd-header-logo\" href=\"/delivery\">\n                <img className=\"fd-header-logo-img\" src={srcLogoImage}\n                width=\"151px\"\n                  height=\"33px\"\n                  className=\"d-inline-block align-center\"\n                  alt=\"Antuan Delivery\"/>\n              </Navbar.Brand>\n              <Navbar.Toggle className=\"fd-header-toggle\" aria-controls=\"responsive-navbar-nav\"/>\n              <Navbar.Collapse id=\"responsive-navbar-nav\">\n                <Nav className=\"fd-header-nav mr-auto justify-content-end\">\n                  <Nav.Link style={navLinkStyle} href=\"/partner\"><FormattedMessage id=\"fd_header_partner\"/></Nav.Link>\n                  <Nav.Link style={navLinkStyle} href=\"/deliver\"><FormattedMessage id=\"fd_header_deliver\"/></Nav.Link>\n                  <Nav.Link style={navLinkStyle} href=\"###\" onClick={this.switchLocale}>\n                    <img className=\"fd-header-language-icon\" src={languageSwitchIcon}\n                      width=\"18px\"\n                      height=\"18px\"\n                      alt=\"language switch\"/>\n                    <FormattedMessage id=\"fd_header_language\"/>\n                  </Nav.Link>\n                </Nav>\n              </Navbar.Collapse>\n            </div>\n          </Navbar>\n\n      </>\n    );\n  }\n}\n\nfunction mapStateToProps(state){\n  return{\n    lang: state.locale.lang\n  };\n}\nexport default connect(mapStateToProps, {setLocale})(DeliveryHeader);\n"]},"metadata":{},"sourceType":"module"}