{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));\n\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));\n\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar Vcode =\n/*#__PURE__*/\nfunction (_React$PureComponent) {\n  (0, _inherits2.default)(Vcode, _React$PureComponent);\n\n  function Vcode(props) {\n    var _this;\n\n    (0, _classCallCheck2.default)(this, Vcode);\n    _this = (0, _possibleConstructorReturn2.default)(this, (0, _getPrototypeOf2.default)(Vcode).call(this, props));\n    _this.state = {\n      id: _this.props.id || \"\".concat(new Date().getTime(), \"_\").concat(Math.random().toFixed(4)),\n      // 需要一个唯一的ID，因为vcode要直接操作dom\n      width: _this.props.width || 150,\n      // vcode宽度\n      height: _this.props.height || 40,\n      // vcode高度\n      len: _this.props.length || 4,\n      // 生成几位code\n      style: function () {\n        // vcode容器样式\n        var a = {\n          position: 'relative',\n          backgroundColor: '#fff',\n          overflow: 'hidden',\n          width: _this.props.width ? \"\".concat(_this.props.width, \"px\") : '150px',\n          height: _this.props.height ? \"\".concat(_this.props.height, \"px\") : '40px',\n          cursor: 'pointer',\n          verticalAlign: 'middle',\n          userSelect: 'none'\n        };\n\n        if (_this.props.style) {\n          return Object.assign({}, a, _this.props.style);\n        }\n\n        return a;\n      }(),\n      options: function () {\n        // 初始化参数\n        var a = {\n          codes: ['A', 'B', ' C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z', 'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'o', 'p', 'q', 'r', 's', 't', 'x', 'u', 'v', 'y', 'z', 'w', 'n', '0', '1', '2', '3', '4', '5', '6', '7', '8', '9'],\n          // 所有可能出现的字符\n          fontSizeMin: 22,\n          // 字体尺寸最小值\n          fontSizeMax: 26,\n          // 字体尺寸最大值\n          colors: ['#117cb3', '#f47b06', '#202890', '#db1821', '#b812c2'],\n          // 字可能的颜色\n          fonts: ['Times New Roman', 'Georgia', 'Serif', 'sans-serif', 'arial', 'tahoma', 'Hiragino Sans GB'],\n          // 可能的字体\n          lines: 10,\n          // 生成多少根线\n          lineColors: [// 线可能的颜色\n          '#7999e1', '#383838', '#ec856d', '#008888'],\n          lineHeightMin: 1,\n          // 线的粗细最小值\n          lineHeightMax: 1,\n          // 线的粗细最大值\n          lineWidthMin: 20,\n          // 线的长度最小值\n          lineWidthMax: 100 // 线的长度最大值\n\n        };\n\n        if (_this.props.options) {\n          return Object.assign({}, a, _this.props.options);\n        }\n\n        return a;\n      }()\n    };\n    return _this;\n  }\n  /** 组件初始化完毕时触发 **/\n\n\n  (0, _createClass2.default)(Vcode, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.onDraw(this.props.value);\n    }\n    /** 组件参数改变 **/\n\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevP) {\n      if (this.props.value !== prevP.value) {\n        this.onDraw(this.props.value);\n      }\n\n      if (this.props.width !== prevP.width || this.props.height !== prevP.height || this.props.style !== prevP.style) {\n        this.setState({\n          width: this.props.width || 150,\n          height: this.props.height || 40,\n          style: Object.assign({}, this.state.style, {\n            width: this.props.width ? \"\".concat(this.props.width, \"px\") : '150px',\n            height: this.props.height ? \"\".concat(this.props.height, \"px\") : '40px'\n          })\n        });\n      }\n    }\n    /** 用户点击了验证码图片 **/\n\n  }, {\n    key: \"onClick\",\n    value: function onClick() {\n      // 如果用户没有设置值，就直接重新生成\n      if (!this.props.value) {\n        this.onDraw(this.props.value);\n      }\n\n      this.props.onClick && this.props.onClick(); // 触发外部的onClick,什么都不返回\n    }\n    /** 随机生成一个Code的CSS样式 **/\n\n  }, {\n    key: \"codeCss\",\n    value: function codeCss(uW, i) {\n      return [\"font-size:\".concat(this.randint(this.state.options.fontSizeMin, this.state.options.fontSizeMax), \"px\"), \"color:\".concat(this.state.options.colors[this.randint(0, this.state.options.colors.length - 1)]), 'position: absolute', \"left:\".concat(this.randint(uW * i, uW * i + uW - uW / 2), \"px\"), 'top:50%', \"transform:rotate(\".concat(this.randint(-15, 15), \"deg) translateY(-50%)\"), \"-o-transform:rotate(\".concat(this.randint(-15, 15), \"deg) translateY(-50%)\"), \"-ms-transform:rotate(\".concat(this.randint(-15, 15), \"deg) translateY(-50%)\"), \"-moz-transform:rotate(\".concat(this.randint(-15, 15), \"deg) translateY(-50%)\"), \"-webkit-transform:rotate(\".concat(this.randint(-15, 15), \"deg) translateY(-50%)\"), \"font-family:\".concat(this.state.options.fonts[this.randint(0, this.state.options.fonts.length - 1)]), 'font-weight:bold', 'z-index:2'].join(';');\n    }\n    /** 随机生成一条线的CSS样式 **/\n\n  }, {\n    key: \"lineCss\",\n    value: function lineCss() {\n      return ['position: absolute', \"opacity:\".concat(this.randint(3, 8) / 10), \"width:\".concat(this.randint(this.state.options.lineWidthMin, this.state.options.lineWidthMax), \"px\"), \"height:\".concat(this.randint(this.state.options.lineHeightMin, this.state.options.lineHeightMax), \"px\"), \"background:\".concat(this.state.options.lineColors[this.randint(0, this.state.options.lineColors.length - 1)]), \"left:\".concat(this.randint(-this.state.options.lineWidthMin / 2, this.state.width), \"px\"), \"top:\".concat(this.randint(0, this.state.height), \"px\"), \"transform:rotate(\".concat(this.randint(-30, 30), \"deg)\"), \"-o-transform:rotate(\".concat(this.randint(-30, 30), \"deg)\"), \"-ms-transform:rotate(\".concat(this.randint(-30, 30), \"deg)\"), \"-moz-transform:rotate(\".concat(this.randint(-30, 30), \"deg)\"), \"-webkit-transform:rotate(\".concat(this.randint(-30, 30), \"deg)\"), \"font-family:\".concat(this.state.options.fonts[this.randint(0, this.state.options.fonts.length - 1)]), \"font-weight:\".concat(this.randint(400, 900))].join(';');\n    }\n  }, {\n    key: \"onDraw\",\n    value: function onDraw(value) {\n      var c = ''; // 存储生成的code\n\n      var div = document.getElementById(this.state.id);\n      /* var isImg = /^http[s]*:\\/\\/|\\.jpg$|\\.png$|\\.jpeg$|\\.gif$|\\.bmp$|\\.webp$|^data:image/.test(value); // 是否是图片 */\n\n      div.innerHTML = '';\n      /* if (isImg) {\n        // 用户传递了一张图片\n        var dom = document.createElement('img');\n        dom.style.cssText = ['display: block', 'max-width:100%', 'max-height:100%'].join(';');\n        dom.src = value;\n        div.appendChild(dom);\n        this.props.onChange && this.props.onChange(null);\n        return null;\n      } // 不是图片而是普通字符串, 如果value存在说明是用户自定义的字符串 */\n\n      var length = value ? value.length : this.state.len; // 字符的长度\n\n      var uW = this.state.width / length / 1.01; // 每个字符占的宽度\n\n      for (var i = 0; i < length; i++) {\n        var _dom = document.createElement('span');\n\n        _dom.style.cssText = this.codeCss(uW, i);\n        var temp = value ? value[i] : this.state.options.codes[Math.round(Math.random() * (this.state.options.codes.length - 1))];\n        _dom.innerHTML = temp;\n        c = \"\".concat(c).concat(temp);\n        div.appendChild(_dom);\n      } // 生成好看的线条\n\n\n      for (var _i = 0; _i < this.state.options.lines; _i++) {\n        var _dom2 = document.createElement('div');\n\n        _dom2.style.cssText = this.lineCss();\n        div.appendChild(_dom2);\n      }\n\n      this.props.onChange && this.props.onChange(c); // 触发回调\n\n      return c;\n    }\n    /** 生成范围随机数 **/\n\n  }, {\n    key: \"randint\",\n    value: function randint(n, m) {\n      var c = m - n + 1;\n      var num = Math.random() * c + n;\n      return Math.floor(num);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return _react.default.createElement(\"div\", {\n        id: this.state.id,\n        style: this.state.style,\n        className: this.props.className,\n        onClick: function onClick() {\n          return _this2.onClick();\n        }\n      });\n    }\n  }]);\n  return Vcode;\n}(_react.default.PureComponent);\n/**\n  id: P.string, // ID\n  length: P.number,  // 生成几位字符串\n  value: P.string,  // 由父级传入指定的字符串生成code\n  width: P.number,  // 多宽 px\n  height: P.number,  //  多高 px\n  style: P.object,    // 自定义style\n  className: P.string,  // 各种class\n  onChange: P.func, // 每次生成新的验证码时，将验证码的值传到上级\n  options: P.object,  // 自定义各参数\n**/\n\n\nexports.default = Vcode;","map":{"version":3,"sources":["/Users/chellypeng/workspace/Ft-Official-Website/ft-offical-website/src/modules/delivery/verificationcode/vcode/vode.component.js"],"names":["_interopRequireDefault","require","Object","defineProperty","exports","value","default","_classCallCheck2","_createClass2","_possibleConstructorReturn2","_getPrototypeOf2","_inherits2","_react","Vcode","_React$PureComponent","props","_this","call","state","id","concat","Date","getTime","Math","random","toFixed","width","height","len","length","style","a","position","backgroundColor","overflow","cursor","verticalAlign","userSelect","assign","options","codes","fontSizeMin","fontSizeMax","colors","fonts","lines","lineColors","lineHeightMin","lineHeightMax","lineWidthMin","lineWidthMax","key","componentDidMount","onDraw","componentDidUpdate","prevP","setState","onClick","codeCss","uW","i","randint","join","lineCss","c","div","document","getElementById","innerHTML","_dom","createElement","cssText","temp","round","appendChild","_i","_dom2","onChange","n","m","num","floor","render","_this2","className","PureComponent"],"mappings":"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","sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));\n\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));\n\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar Vcode =\n/*#__PURE__*/\nfunction (_React$PureComponent) {\n  (0, _inherits2.default)(Vcode, _React$PureComponent);\n\n  function Vcode(props) {\n    var _this;\n\n    (0, _classCallCheck2.default)(this, Vcode);\n    _this = (0, _possibleConstructorReturn2.default)(this, (0, _getPrototypeOf2.default)(Vcode).call(this, props));\n    _this.state = {\n      id: _this.props.id || \"\".concat(new Date().getTime(), \"_\").concat(Math.random().toFixed(4)),\n      // 需要一个唯一的ID，因为vcode要直接操作dom\n      width: _this.props.width || 150,\n      // vcode宽度\n      height: _this.props.height || 40,\n      // vcode高度\n      len: _this.props.length || 4,\n      // 生成几位code\n      style: function () {\n        // vcode容器样式\n        var a = {\n          position: 'relative',\n          backgroundColor: '#fff',\n          overflow: 'hidden',\n          width: _this.props.width ? \"\".concat(_this.props.width, \"px\") : '150px',\n          height: _this.props.height ? \"\".concat(_this.props.height, \"px\") : '40px',\n          cursor: 'pointer',\n          verticalAlign: 'middle',\n          userSelect: 'none'\n        };\n\n        if (_this.props.style) {\n          return Object.assign({}, a, _this.props.style);\n        }\n\n        return a;\n      }(),\n      options: function () {\n        // 初始化参数\n        var a = {\n          codes: [\n          'A', 'B',' C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z',\n          'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'o', 'p', 'q', 'r', 's', 't', 'x', 'u', 'v', 'y', 'z', 'w', 'n', \n          '0', '1', '2', '3', '4', '5', '6', '7', '8', '9'\n          ],\n          // 所有可能出现的字符\n          fontSizeMin: 22,\n          // 字体尺寸最小值\n          fontSizeMax: 26,\n          // 字体尺寸最大值\n          colors: [\n          '#117cb3', '#f47b06', '#202890', '#db1821', '#b812c2'],\n          // 字可能的颜色\n          fonts: [\n          'Times New Roman', 'Georgia', 'Serif', 'sans-serif', 'arial', 'tahoma', 'Hiragino Sans GB'],\n          // 可能的字体\n          lines: 10,\n          // 生成多少根线\n          lineColors: [// 线可能的颜色\n          '#7999e1', '#383838', '#ec856d', '#008888'],\n          lineHeightMin: 1,\n          // 线的粗细最小值\n          lineHeightMax: 1,\n          // 线的粗细最大值\n          lineWidthMin: 20,\n          // 线的长度最小值\n          lineWidthMax: 100 \n          // 线的长度最大值\n\n        };\n\n        if (_this.props.options) {\n          return Object.assign({}, a, _this.props.options);\n        }\n\n        return a;\n      }()\n    };\n    return _this;\n  }\n  /** 组件初始化完毕时触发 **/\n\n\n  (0, _createClass2.default)(Vcode, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.onDraw(this.props.value);\n    }\n  /** 组件参数改变 **/\n\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevP) {\n      if (this.props.value !== prevP.value) {\n        this.onDraw(this.props.value);\n      }\n\n      if (this.props.width !== prevP.width || this.props.height !== prevP.height || this.props.style !== prevP.style) {\n        this.setState({\n          width: this.props.width || 150,\n          height: this.props.height || 40,\n          style: Object.assign({}, this.state.style, {\n            width: this.props.width ? \"\".concat(this.props.width, \"px\") : '150px',\n            height: this.props.height ? \"\".concat(this.props.height, \"px\") : '40px'\n          })\n        });\n      }\n    }\n    /** 用户点击了验证码图片 **/\n\n  }, {\n    key: \"onClick\",\n    value: function onClick() {\n      // 如果用户没有设置值，就直接重新生成\n      if (!this.props.value) {\n        this.onDraw(this.props.value);\n      }\n\n      this.props.onClick && this.props.onClick(); // 触发外部的onClick,什么都不返回\n    }\n    /** 随机生成一个Code的CSS样式 **/\n\n  }, {\n    key: \"codeCss\",\n    value: function codeCss(uW, i) {\n      return [\"font-size:\".concat(this.randint(this.state.options.fontSizeMin, this.state.options.fontSizeMax), \"px\"), \"color:\".concat(this.state.options.colors[this.randint(0, this.state.options.colors.length - 1)]), 'position: absolute', \"left:\".concat(this.randint(uW * i, uW * i + uW - uW / 2), \"px\"), 'top:50%', \"transform:rotate(\".concat(this.randint(-15, 15), \"deg) translateY(-50%)\"), \"-o-transform:rotate(\".concat(this.randint(-15, 15), \"deg) translateY(-50%)\"), \"-ms-transform:rotate(\".concat(this.randint(-15, 15), \"deg) translateY(-50%)\"), \"-moz-transform:rotate(\".concat(this.randint(-15, 15), \"deg) translateY(-50%)\"), \"-webkit-transform:rotate(\".concat(this.randint(-15, 15), \"deg) translateY(-50%)\"), \"font-family:\".concat(this.state.options.fonts[this.randint(0, this.state.options.fonts.length - 1)]), 'font-weight:bold', 'z-index:2'].join(';');\n    }\n    /** 随机生成一条线的CSS样式 **/\n\n  }, {\n    key: \"lineCss\",\n    value: function lineCss() {\n      return ['position: absolute', \"opacity:\".concat(this.randint(3, 8) / 10), \"width:\".concat(this.randint(this.state.options.lineWidthMin, this.state.options.lineWidthMax), \"px\"), \"height:\".concat(this.randint(this.state.options.lineHeightMin, this.state.options.lineHeightMax), \"px\"), \"background:\".concat(this.state.options.lineColors[this.randint(0, this.state.options.lineColors.length - 1)]), \"left:\".concat(this.randint(-this.state.options.lineWidthMin / 2, this.state.width), \"px\"), \"top:\".concat(this.randint(0, this.state.height), \"px\"), \"transform:rotate(\".concat(this.randint(-30, 30), \"deg)\"), \"-o-transform:rotate(\".concat(this.randint(-30, 30), \"deg)\"), \"-ms-transform:rotate(\".concat(this.randint(-30, 30), \"deg)\"), \"-moz-transform:rotate(\".concat(this.randint(-30, 30), \"deg)\"), \"-webkit-transform:rotate(\".concat(this.randint(-30, 30), \"deg)\"), \"font-family:\".concat(this.state.options.fonts[this.randint(0, this.state.options.fonts.length - 1)]), \"font-weight:\".concat(this.randint(400, 900))].join(';');\n    }\n  }, {\n    key: \"onDraw\",\n    value: function onDraw(value) {\n      var c = ''; // 存储生成的code\n\n      var div = document.getElementById(this.state.id);\n      /* var isImg = /^http[s]*:\\/\\/|\\.jpg$|\\.png$|\\.jpeg$|\\.gif$|\\.bmp$|\\.webp$|^data:image/.test(value); // 是否是图片 */\n\n      div.innerHTML = '';\n\n      /* if (isImg) {\n        // 用户传递了一张图片\n        var dom = document.createElement('img');\n        dom.style.cssText = ['display: block', 'max-width:100%', 'max-height:100%'].join(';');\n        dom.src = value;\n        div.appendChild(dom);\n        this.props.onChange && this.props.onChange(null);\n        return null;\n      } // 不是图片而是普通字符串, 如果value存在说明是用户自定义的字符串 */\n\n\n      var length = value ? value.length : this.state.len; // 字符的长度\n\n      var uW = this.state.width / length / 1.01; // 每个字符占的宽度\n\n      for (var i = 0; i < length; i++) {\n        var _dom = document.createElement('span');\n\n        _dom.style.cssText = this.codeCss(uW, i);\n        var temp = value ? value[i] : this.state.options.codes[Math.round(Math.random() * (this.state.options.codes.length - 1))];\n        _dom.innerHTML = temp;\n        c = \"\".concat(c).concat(temp);\n        div.appendChild(_dom);\n      } // 生成好看的线条\n\n\n      for (var _i = 0; _i < this.state.options.lines; _i++) {\n        var _dom2 = document.createElement('div');\n\n        _dom2.style.cssText = this.lineCss();\n        div.appendChild(_dom2);\n      }\n\n      this.props.onChange && this.props.onChange(c); // 触发回调\n\n      return c;\n    }\n    /** 生成范围随机数 **/\n\n  }, {\n    key: \"randint\",\n    value: function randint(n, m) {\n      var c = m - n + 1;\n      var num = Math.random() * c + n;\n      return Math.floor(num);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return _react.default.createElement(\"div\", {\n        id: this.state.id,\n        style: this.state.style,\n        className: this.props.className,\n        onClick: function onClick() {\n          return _this2.onClick();\n        }\n      });\n    }\n  }]);\n  return Vcode;\n}(_react.default.PureComponent);\n\n/**\n  id: P.string, // ID\n  length: P.number,  // 生成几位字符串\n  value: P.string,  // 由父级传入指定的字符串生成code\n  width: P.number,  // 多宽 px\n  height: P.number,  //  多高 px\n  style: P.object,    // 自定义style\n  className: P.string,  // 各种class\n  onChange: P.func, // 每次生成新的验证码时，将验证码的值传到上级\n  options: P.object,  // 自定义各参数\n**/\n\nexports.default = Vcode;"]},"metadata":{},"sourceType":"module"}