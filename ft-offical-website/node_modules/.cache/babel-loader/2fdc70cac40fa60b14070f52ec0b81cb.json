{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __spreadArrays = this && this.__spreadArrays || function () {\n  for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n\n  for (var r = Array(s), k = 0, i = 0; i < il; i++) for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++) r[k] = a[j];\n\n  return r;\n};\n\nimport { convertNumberSkeletonToNumberFormatOptions, isArgumentElement, isDateElement, isDateTimeSkeleton, isLiteralElement, isNumberElement, isNumberSkeleton, isPluralElement, isSelectElement, isTimeElement, parseDateTimeSkeleton } from 'intl-messageformat-parser';\nvar ESCAPE_HASH_REGEX = /\\\\#/g;\nvar PLURAL_HASH = /(^|[^\\\\])#/g;\n\nvar FormatError =\n/** @class */\nfunction (_super) {\n  __extends(FormatError, _super);\n\n  function FormatError(msg, variableId) {\n    var _this = _super.call(this, msg) || this;\n\n    _this.variableId = variableId;\n    return _this;\n  }\n\n  return FormatError;\n}(Error);\n\nfunction mergeLiteral(parts) {\n  if (parts.length < 2) {\n    return parts;\n  }\n\n  return parts.reduce(function (all, part) {\n    var lastPart = all[all.length - 1];\n\n    if (!lastPart || lastPart.type !== 0\n    /* literal */\n    || part.type !== 0\n    /* literal */\n    ) {\n        all.push(part);\n      } else {\n      lastPart.value += part.value;\n    }\n\n    return all;\n  }, []);\n} // TODO(skeleton): add skeleton support\n\n\nexport function formatToParts(els, locales, formatters, formats, values, currentPluralValue, // For debugging\noriginalMessage) {\n  // Hot path for straight simple msg translations\n  if (els.length === 1 && isLiteralElement(els[0])) {\n    var value = els[0].value;\n\n    if (typeof currentPluralValue === 'number') {\n      value = value.replace(PLURAL_HASH, '$1' + formatters.getNumberFormat(locales).format(currentPluralValue));\n    }\n\n    return [{\n      type: 0\n      /* literal */\n      ,\n      value: value.replace(ESCAPE_HASH_REGEX, '#')\n    }];\n  }\n\n  var result = [];\n\n  for (var _i = 0, els_1 = els; _i < els_1.length; _i++) {\n    var el = els_1[_i]; // Exit early for string parts.\n\n    if (isLiteralElement(el)) {\n      var value_1 = el.value;\n\n      if (typeof currentPluralValue === 'number') {\n        value_1 = value_1.replace(PLURAL_HASH, '$1' + formatters.getNumberFormat(locales).format(currentPluralValue));\n      }\n\n      result.push({\n        type: 0\n        /* literal */\n        ,\n        value: value_1.replace(ESCAPE_HASH_REGEX, '#')\n      });\n      continue;\n    }\n\n    var varName = el.value; // Enforce that all required values are provided by the caller.\n\n    if (!(values && varName in values)) {\n      throw new FormatError(\"The intl string context variable \\\"\" + varName + \"\\\" was not provided to the string \\\"\" + originalMessage + \"\\\"\");\n    }\n\n    var value = values[varName];\n\n    if (isArgumentElement(el)) {\n      if (!value || typeof value === 'string' || typeof value === 'number') {\n        value = typeof value === 'string' || typeof value === 'number' ? String(value) : '';\n      }\n\n      result.push({\n        type: 1\n        /* argument */\n        ,\n        value: value\n      });\n      continue;\n    } // Recursively format plural and select parts' option â€” which can be a\n    // nested pattern structure. The choosing of the option to use is\n    // abstracted-by and delegated-to the part helper object.\n\n\n    if (isDateElement(el)) {\n      var style = typeof el.style === 'string' ? formats.date[el.style] : undefined;\n      result.push({\n        type: 0\n        /* literal */\n        ,\n        value: formatters.getDateTimeFormat(locales, style).format(value)\n      });\n      continue;\n    }\n\n    if (isTimeElement(el)) {\n      var style = typeof el.style === 'string' ? formats.time[el.style] : isDateTimeSkeleton(el.style) ? parseDateTimeSkeleton(el.style.pattern) : undefined;\n      result.push({\n        type: 0\n        /* literal */\n        ,\n        value: formatters.getDateTimeFormat(locales, style).format(value)\n      });\n      continue;\n    }\n\n    if (isNumberElement(el)) {\n      var style = typeof el.style === 'string' ? formats.number[el.style] : isNumberSkeleton(el.style) ? convertNumberSkeletonToNumberFormatOptions(el.style.tokens) : undefined;\n      result.push({\n        type: 0\n        /* literal */\n        ,\n        value: formatters.getNumberFormat(locales, style).format(value)\n      });\n      continue;\n    }\n\n    if (isSelectElement(el)) {\n      var opt = el.options[value] || el.options.other;\n\n      if (!opt) {\n        throw new RangeError(\"Invalid values for \\\"\" + el.value + \"\\\": \\\"\" + value + \"\\\". Options are \\\"\" + Object.keys(el.options).join('\", \"') + \"\\\"\");\n      }\n\n      result.push.apply(result, formatToParts(opt.value, locales, formatters, formats, values));\n      continue;\n    }\n\n    if (isPluralElement(el)) {\n      var opt = el.options[\"=\" + value];\n\n      if (!opt) {\n        if (!Intl.PluralRules) {\n          throw new FormatError(\"Intl.PluralRules is not available in this environment.\\nTry polyfilling it using \\\"@formatjs/intl-pluralrules\\\"\\n\");\n        }\n\n        var rule = formatters.getPluralRules(locales, {\n          type: el.pluralType\n        }).select(value - (el.offset || 0));\n        opt = el.options[rule] || el.options.other;\n      }\n\n      if (!opt) {\n        throw new RangeError(\"Invalid values for \\\"\" + el.value + \"\\\": \\\"\" + value + \"\\\". Options are \\\"\" + Object.keys(el.options).join('\", \"') + \"\\\"\");\n      }\n\n      result.push.apply(result, formatToParts(opt.value, locales, formatters, formats, values, value - (el.offset || 0)));\n      continue;\n    }\n  }\n\n  return mergeLiteral(result);\n}\nexport function formatToString(els, locales, formatters, formats, values, // For debugging\noriginalMessage) {\n  var parts = formatToParts(els, locales, formatters, formats, values, undefined, originalMessage); // Hot path for straight simple msg translations\n\n  if (parts.length === 1) {\n    return parts[0].value;\n  }\n\n  return parts.reduce(function (all, part) {\n    return all += part.value;\n  }, '');\n} // Singleton\n\nvar domParser;\nvar TOKEN_DELIMITER = '@@';\nvar TOKEN_REGEX = /@@(\\d+_\\d+)@@/g;\nvar counter = 0;\n\nfunction generateId() {\n  return Date.now() + \"_\" + ++counter;\n}\n\nfunction restoreRichPlaceholderMessage(text, objectParts) {\n  return text.split(TOKEN_REGEX).filter(Boolean).map(function (c) {\n    return objectParts[c] != null ? objectParts[c] : c;\n  }).reduce(function (all, c) {\n    if (!all.length) {\n      all.push(c);\n    } else if (typeof c === 'string' && typeof all[all.length - 1] === 'string') {\n      all[all.length - 1] += c;\n    } else {\n      all.push(c);\n    }\n\n    return all;\n  }, []);\n}\n/**\n * Not exhaustive, just for sanity check\n */\n\n\nvar SIMPLE_XML_REGEX = /(<([0-9a-zA-Z-_]*?)>(.*?)<\\/([0-9a-zA-Z-_]*?)>)|(<[0-9a-zA-Z-_]*?\\/>)/;\nvar TEMPLATE_ID = Date.now() + '@@';\nvar VOID_ELEMENTS = ['area', 'base', 'br', 'col', 'embed', 'hr', 'img', 'input', 'link', 'meta', 'param', 'source', 'track', 'wbr'];\n\nfunction formatHTMLElement(el, objectParts, values) {\n  var tagName = el.tagName;\n  var outerHTML = el.outerHTML,\n      textContent = el.textContent,\n      childNodes = el.childNodes; // Regular text\n\n  if (!tagName) {\n    return restoreRichPlaceholderMessage(textContent || '', objectParts);\n  }\n\n  tagName = tagName.toLowerCase();\n  var isVoidElement = ~VOID_ELEMENTS.indexOf(tagName);\n  var formatFnOrValue = values[tagName];\n\n  if (formatFnOrValue && isVoidElement) {\n    throw new FormatError(tagName + \" is a self-closing tag and can not be used, please use another tag name.\");\n  }\n\n  if (!childNodes.length) {\n    return [outerHTML];\n  }\n\n  var chunks = Array.prototype.slice.call(childNodes).reduce(function (all, child) {\n    return all.concat(formatHTMLElement(child, objectParts, values));\n  }, []); // Legacy HTML\n\n  if (!formatFnOrValue) {\n    return __spreadArrays([\"<\" + tagName + \">\"], chunks, [\"</\" + tagName + \">\"]);\n  } // HTML Tag replacement\n\n\n  if (typeof formatFnOrValue === 'function') {\n    return [formatFnOrValue.apply(void 0, chunks)];\n  }\n\n  return [formatFnOrValue];\n}\n\nexport function formatHTMLMessage(els, locales, formatters, formats, values, // For debugging\noriginalMessage) {\n  var parts = formatToParts(els, locales, formatters, formats, values, undefined, originalMessage);\n  var objectParts = {};\n  var formattedMessage = parts.reduce(function (all, part) {\n    if (part.type === 0\n    /* literal */\n    ) {\n        return all += part.value;\n      }\n\n    var id = generateId();\n    objectParts[id] = part.value;\n    return all += \"\" + TOKEN_DELIMITER + id + TOKEN_DELIMITER;\n  }, ''); // Not designed to filter out aggressively\n\n  if (!SIMPLE_XML_REGEX.test(formattedMessage)) {\n    return restoreRichPlaceholderMessage(formattedMessage, objectParts);\n  }\n\n  if (!values) {\n    throw new FormatError('Message has placeholders but no values was given');\n  }\n\n  if (typeof DOMParser === 'undefined') {\n    throw new FormatError('Cannot format XML message without DOMParser');\n  }\n\n  if (!domParser) {\n    domParser = new DOMParser();\n  }\n\n  var content = domParser.parseFromString(\"<formatted-message id=\\\"\" + TEMPLATE_ID + \"\\\">\" + formattedMessage + \"</formatted-message>\", 'text/html').getElementById(TEMPLATE_ID);\n\n  if (!content) {\n    throw new FormatError(\"Malformed HTML message \" + formattedMessage);\n  }\n\n  var tagsToFormat = Object.keys(values).filter(function (varName) {\n    return !!content.getElementsByTagName(varName).length;\n  }); // No tags to format\n\n  if (!tagsToFormat.length) {\n    return restoreRichPlaceholderMessage(formattedMessage, objectParts);\n  }\n\n  var caseSensitiveTags = tagsToFormat.filter(function (tagName) {\n    return tagName !== tagName.toLowerCase();\n  });\n\n  if (caseSensitiveTags.length) {\n    throw new FormatError(\"HTML tag must be lowercased but the following tags are not: \" + caseSensitiveTags.join(', '));\n  } // We're doing this since top node is `<formatted-message/>` which does not have a formatter\n\n\n  return Array.prototype.slice.call(content.childNodes).reduce(function (all, child) {\n    return all.concat(formatHTMLElement(child, objectParts, values));\n  }, []);\n}","map":{"version":3,"sources":["/Users/chengpeng/workspace/Ft-Official-Website/ft-offical-website/node_modules/intl-messageformat/lib/formatters.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","__spreadArrays","s","i","il","arguments","length","r","k","a","j","jl","convertNumberSkeletonToNumberFormatOptions","isArgumentElement","isDateElement","isDateTimeSkeleton","isLiteralElement","isNumberElement","isNumberSkeleton","isPluralElement","isSelectElement","isTimeElement","parseDateTimeSkeleton","ESCAPE_HASH_REGEX","PLURAL_HASH","FormatError","_super","msg","variableId","_this","call","Error","mergeLiteral","parts","reduce","all","part","lastPart","type","push","value","formatToParts","els","locales","formatters","formats","values","currentPluralValue","originalMessage","replace","getNumberFormat","format","result","_i","els_1","el","value_1","varName","String","style","date","undefined","getDateTimeFormat","time","pattern","number","tokens","opt","options","other","RangeError","keys","join","apply","Intl","PluralRules","rule","getPluralRules","pluralType","select","offset","formatToString","domParser","TOKEN_DELIMITER","TOKEN_REGEX","counter","generateId","Date","now","restoreRichPlaceholderMessage","text","objectParts","split","filter","Boolean","map","c","SIMPLE_XML_REGEX","TEMPLATE_ID","VOID_ELEMENTS","formatHTMLElement","tagName","outerHTML","textContent","childNodes","toLowerCase","isVoidElement","indexOf","formatFnOrValue","chunks","slice","child","concat","formatHTMLMessage","formattedMessage","id","test","DOMParser","content","parseFromString","getElementById","tagsToFormat","getElementsByTagName","caseSensitiveTags"],"mappings":"AAAA,IAAIA,SAAS,GAAI,QAAQ,KAAKA,SAAd,IAA6B,YAAY;AACrD,MAAIC,aAAa,GAAG,UAAUC,CAAV,EAAaC,CAAb,EAAgB;AAChCF,IAAAA,aAAa,GAAGG,MAAM,CAACC,cAAP,IACX;AAAEC,MAAAA,SAAS,EAAE;AAAb,iBAA6BC,KAA7B,IAAsC,UAAUL,CAAV,EAAaC,CAAb,EAAgB;AAAED,MAAAA,CAAC,CAACI,SAAF,GAAcH,CAAd;AAAkB,KAD/D,IAEZ,UAAUD,CAAV,EAAaC,CAAb,EAAgB;AAAE,WAAK,IAAIK,CAAT,IAAcL,CAAd,EAAiB,IAAIA,CAAC,CAACM,cAAF,CAAiBD,CAAjB,CAAJ,EAAyBN,CAAC,CAACM,CAAD,CAAD,GAAOL,CAAC,CAACK,CAAD,CAAR;AAAc,KAF9E;;AAGA,WAAOP,aAAa,CAACC,CAAD,EAAIC,CAAJ,CAApB;AACH,GALD;;AAMA,SAAO,UAAUD,CAAV,EAAaC,CAAb,EAAgB;AACnBF,IAAAA,aAAa,CAACC,CAAD,EAAIC,CAAJ,CAAb;;AACA,aAASO,EAAT,GAAc;AAAE,WAAKC,WAAL,GAAmBT,CAAnB;AAAuB;;AACvCA,IAAAA,CAAC,CAACU,SAAF,GAAcT,CAAC,KAAK,IAAN,GAAaC,MAAM,CAACS,MAAP,CAAcV,CAAd,CAAb,IAAiCO,EAAE,CAACE,SAAH,GAAeT,CAAC,CAACS,SAAjB,EAA4B,IAAIF,EAAJ,EAA7D,CAAd;AACH,GAJD;AAKH,CAZ2C,EAA5C;;AAaA,IAAII,cAAc,GAAI,QAAQ,KAAKA,cAAd,IAAiC,YAAY;AAC9D,OAAK,IAAIC,CAAC,GAAG,CAAR,EAAWC,CAAC,GAAG,CAAf,EAAkBC,EAAE,GAAGC,SAAS,CAACC,MAAtC,EAA8CH,CAAC,GAAGC,EAAlD,EAAsDD,CAAC,EAAvD,EAA2DD,CAAC,IAAIG,SAAS,CAACF,CAAD,CAAT,CAAaG,MAAlB;;AAC3D,OAAK,IAAIC,CAAC,GAAGb,KAAK,CAACQ,CAAD,CAAb,EAAkBM,CAAC,GAAG,CAAtB,EAAyBL,CAAC,GAAG,CAAlC,EAAqCA,CAAC,GAAGC,EAAzC,EAA6CD,CAAC,EAA9C,EACI,KAAK,IAAIM,CAAC,GAAGJ,SAAS,CAACF,CAAD,CAAjB,EAAsBO,CAAC,GAAG,CAA1B,EAA6BC,EAAE,GAAGF,CAAC,CAACH,MAAzC,EAAiDI,CAAC,GAAGC,EAArD,EAAyDD,CAAC,IAAIF,CAAC,EAA/D,EACID,CAAC,CAACC,CAAD,CAAD,GAAOC,CAAC,CAACC,CAAD,CAAR;;AACR,SAAOH,CAAP;AACH,CAND;;AAOA,SAASK,0CAAT,EAAqDC,iBAArD,EAAwEC,aAAxE,EAAuFC,kBAAvF,EAA2GC,gBAA3G,EAA6HC,eAA7H,EAA8IC,gBAA9I,EAAgKC,eAAhK,EAAiLC,eAAjL,EAAkMC,aAAlM,EAAiNC,qBAAjN,QAA+O,2BAA/O;AACA,IAAIC,iBAAiB,GAAG,MAAxB;AACA,IAAIC,WAAW,GAAG,aAAlB;;AACA,IAAIC,WAAW;AAAG;AAAe,UAAUC,MAAV,EAAkB;AAC/CvC,EAAAA,SAAS,CAACsC,WAAD,EAAcC,MAAd,CAAT;;AACA,WAASD,WAAT,CAAqBE,GAArB,EAA0BC,UAA1B,EAAsC;AAClC,QAAIC,KAAK,GAAGH,MAAM,CAACI,IAAP,CAAY,IAAZ,EAAkBH,GAAlB,KAA0B,IAAtC;;AACAE,IAAAA,KAAK,CAACD,UAAN,GAAmBA,UAAnB;AACA,WAAOC,KAAP;AACH;;AACD,SAAOJ,WAAP;AACH,CARgC,CAQ/BM,KAR+B,CAAjC;;AASA,SAASC,YAAT,CAAsBC,KAAtB,EAA6B;AACzB,MAAIA,KAAK,CAAC3B,MAAN,GAAe,CAAnB,EAAsB;AAClB,WAAO2B,KAAP;AACH;;AACD,SAAOA,KAAK,CAACC,MAAN,CAAa,UAAUC,GAAV,EAAeC,IAAf,EAAqB;AACrC,QAAIC,QAAQ,GAAGF,GAAG,CAACA,GAAG,CAAC7B,MAAJ,GAAa,CAAd,CAAlB;;AACA,QAAI,CAAC+B,QAAD,IACAA,QAAQ,CAACC,IAAT,KAAkB;AAAE;AADpB,OAEAF,IAAI,CAACE,IAAL,KAAc;AAAE;AAFpB,MAEmC;AAC/BH,QAAAA,GAAG,CAACI,IAAJ,CAASH,IAAT;AACH,OAJD,MAKK;AACDC,MAAAA,QAAQ,CAACG,KAAT,IAAkBJ,IAAI,CAACI,KAAvB;AACH;;AACD,WAAOL,GAAP;AACH,GAXM,EAWJ,EAXI,CAAP;AAYH,C,CACD;;;AACA,OAAO,SAASM,aAAT,CAAuBC,GAAvB,EAA4BC,OAA5B,EAAqCC,UAArC,EAAiDC,OAAjD,EAA0DC,MAA1D,EAAkEC,kBAAlE,EACP;AACAC,eAFO,EAEU;AACb;AACA,MAAIN,GAAG,CAACpC,MAAJ,KAAe,CAAf,IAAoBU,gBAAgB,CAAC0B,GAAG,CAAC,CAAD,CAAJ,CAAxC,EAAkD;AAC9C,QAAIF,KAAK,GAAGE,GAAG,CAAC,CAAD,CAAH,CAAOF,KAAnB;;AACA,QAAI,OAAOO,kBAAP,KAA8B,QAAlC,EAA4C;AACxCP,MAAAA,KAAK,GAAGA,KAAK,CAACS,OAAN,CAAczB,WAAd,EAA2B,OAAOoB,UAAU,CAACM,eAAX,CAA2BP,OAA3B,EAAoCQ,MAApC,CAA2CJ,kBAA3C,CAAlC,CAAR;AACH;;AACD,WAAO,CACH;AACIT,MAAAA,IAAI,EAAE;AAAE;AADZ;AAEIE,MAAAA,KAAK,EAAEA,KAAK,CAACS,OAAN,CAAc1B,iBAAd,EAAiC,GAAjC;AAFX,KADG,CAAP;AAMH;;AACD,MAAI6B,MAAM,GAAG,EAAb;;AACA,OAAK,IAAIC,EAAE,GAAG,CAAT,EAAYC,KAAK,GAAGZ,GAAzB,EAA8BW,EAAE,GAAGC,KAAK,CAAChD,MAAzC,EAAiD+C,EAAE,EAAnD,EAAuD;AACnD,QAAIE,EAAE,GAAGD,KAAK,CAACD,EAAD,CAAd,CADmD,CAEnD;;AACA,QAAIrC,gBAAgB,CAACuC,EAAD,CAApB,EAA0B;AACtB,UAAIC,OAAO,GAAGD,EAAE,CAACf,KAAjB;;AACA,UAAI,OAAOO,kBAAP,KAA8B,QAAlC,EAA4C;AACxCS,QAAAA,OAAO,GAAGA,OAAO,CAACP,OAAR,CAAgBzB,WAAhB,EAA6B,OAAOoB,UAAU,CAACM,eAAX,CAA2BP,OAA3B,EAAoCQ,MAApC,CAA2CJ,kBAA3C,CAApC,CAAV;AACH;;AACDK,MAAAA,MAAM,CAACb,IAAP,CAAY;AACRD,QAAAA,IAAI,EAAE;AAAE;AADA;AAERE,QAAAA,KAAK,EAAEgB,OAAO,CAACP,OAAR,CAAgB1B,iBAAhB,EAAmC,GAAnC;AAFC,OAAZ;AAIA;AACH;;AACD,QAAIkC,OAAO,GAAGF,EAAE,CAACf,KAAjB,CAdmD,CAenD;;AACA,QAAI,EAAEM,MAAM,IAAIW,OAAO,IAAIX,MAAvB,CAAJ,EAAoC;AAChC,YAAM,IAAIrB,WAAJ,CAAgB,wCAAwCgC,OAAxC,GAAkD,sCAAlD,GAA2FT,eAA3F,GAA6G,IAA7H,CAAN;AACH;;AACD,QAAIR,KAAK,GAAGM,MAAM,CAACW,OAAD,CAAlB;;AACA,QAAI5C,iBAAiB,CAAC0C,EAAD,CAArB,EAA2B;AACvB,UAAI,CAACf,KAAD,IAAU,OAAOA,KAAP,KAAiB,QAA3B,IAAuC,OAAOA,KAAP,KAAiB,QAA5D,EAAsE;AAClEA,QAAAA,KAAK,GACD,OAAOA,KAAP,KAAiB,QAAjB,IAA6B,OAAOA,KAAP,KAAiB,QAA9C,GACMkB,MAAM,CAAClB,KAAD,CADZ,GAEM,EAHV;AAIH;;AACDY,MAAAA,MAAM,CAACb,IAAP,CAAY;AACRD,QAAAA,IAAI,EAAE;AAAE;AADA;AAERE,QAAAA,KAAK,EAAEA;AAFC,OAAZ;AAIA;AACH,KAhCkD,CAiCnD;AACA;AACA;;;AACA,QAAI1B,aAAa,CAACyC,EAAD,CAAjB,EAAuB;AACnB,UAAII,KAAK,GAAG,OAAOJ,EAAE,CAACI,KAAV,KAAoB,QAApB,GAA+Bd,OAAO,CAACe,IAAR,CAAaL,EAAE,CAACI,KAAhB,CAA/B,GAAwDE,SAApE;AACAT,MAAAA,MAAM,CAACb,IAAP,CAAY;AACRD,QAAAA,IAAI,EAAE;AAAE;AADA;AAERE,QAAAA,KAAK,EAAEI,UAAU,CACZkB,iBADE,CACgBnB,OADhB,EACyBgB,KADzB,EAEFR,MAFE,CAEKX,KAFL;AAFC,OAAZ;AAMA;AACH;;AACD,QAAInB,aAAa,CAACkC,EAAD,CAAjB,EAAuB;AACnB,UAAII,KAAK,GAAG,OAAOJ,EAAE,CAACI,KAAV,KAAoB,QAApB,GACNd,OAAO,CAACkB,IAAR,CAAaR,EAAE,CAACI,KAAhB,CADM,GAEN5C,kBAAkB,CAACwC,EAAE,CAACI,KAAJ,CAAlB,GACIrC,qBAAqB,CAACiC,EAAE,CAACI,KAAH,CAASK,OAAV,CADzB,GAEIH,SAJV;AAKAT,MAAAA,MAAM,CAACb,IAAP,CAAY;AACRD,QAAAA,IAAI,EAAE;AAAE;AADA;AAERE,QAAAA,KAAK,EAAEI,UAAU,CACZkB,iBADE,CACgBnB,OADhB,EACyBgB,KADzB,EAEFR,MAFE,CAEKX,KAFL;AAFC,OAAZ;AAMA;AACH;;AACD,QAAIvB,eAAe,CAACsC,EAAD,CAAnB,EAAyB;AACrB,UAAII,KAAK,GAAG,OAAOJ,EAAE,CAACI,KAAV,KAAoB,QAApB,GACNd,OAAO,CAACoB,MAAR,CAAeV,EAAE,CAACI,KAAlB,CADM,GAENzC,gBAAgB,CAACqC,EAAE,CAACI,KAAJ,CAAhB,GACI/C,0CAA0C,CAAC2C,EAAE,CAACI,KAAH,CAASO,MAAV,CAD9C,GAEIL,SAJV;AAKAT,MAAAA,MAAM,CAACb,IAAP,CAAY;AACRD,QAAAA,IAAI,EAAE;AAAE;AADA;AAERE,QAAAA,KAAK,EAAEI,UAAU,CACZM,eADE,CACcP,OADd,EACuBgB,KADvB,EAEFR,MAFE,CAEKX,KAFL;AAFC,OAAZ;AAMA;AACH;;AACD,QAAIpB,eAAe,CAACmC,EAAD,CAAnB,EAAyB;AACrB,UAAIY,GAAG,GAAGZ,EAAE,CAACa,OAAH,CAAW5B,KAAX,KAAqBe,EAAE,CAACa,OAAH,CAAWC,KAA1C;;AACA,UAAI,CAACF,GAAL,EAAU;AACN,cAAM,IAAIG,UAAJ,CAAe,0BAA0Bf,EAAE,CAACf,KAA7B,GAAqC,QAArC,GAAgDA,KAAhD,GAAwD,oBAAxD,GAA+EjD,MAAM,CAACgF,IAAP,CAAYhB,EAAE,CAACa,OAAf,EAAwBI,IAAxB,CAA6B,MAA7B,CAA/E,GAAsH,IAArI,CAAN;AACH;;AACDpB,MAAAA,MAAM,CAACb,IAAP,CAAYkC,KAAZ,CAAkBrB,MAAlB,EAA0BX,aAAa,CAAC0B,GAAG,CAAC3B,KAAL,EAAYG,OAAZ,EAAqBC,UAArB,EAAiCC,OAAjC,EAA0CC,MAA1C,CAAvC;AACA;AACH;;AACD,QAAI3B,eAAe,CAACoC,EAAD,CAAnB,EAAyB;AACrB,UAAIY,GAAG,GAAGZ,EAAE,CAACa,OAAH,CAAW,MAAM5B,KAAjB,CAAV;;AACA,UAAI,CAAC2B,GAAL,EAAU;AACN,YAAI,CAACO,IAAI,CAACC,WAAV,EAAuB;AACnB,gBAAM,IAAIlD,WAAJ,CAAgB,mHAAhB,CAAN;AACH;;AACD,YAAImD,IAAI,GAAGhC,UAAU,CAChBiC,cADM,CACSlC,OADT,EACkB;AAAEL,UAAAA,IAAI,EAAEiB,EAAE,CAACuB;AAAX,SADlB,EAENC,MAFM,CAECvC,KAAK,IAAIe,EAAE,CAACyB,MAAH,IAAa,CAAjB,CAFN,CAAX;AAGAb,QAAAA,GAAG,GAAGZ,EAAE,CAACa,OAAH,CAAWQ,IAAX,KAAoBrB,EAAE,CAACa,OAAH,CAAWC,KAArC;AACH;;AACD,UAAI,CAACF,GAAL,EAAU;AACN,cAAM,IAAIG,UAAJ,CAAe,0BAA0Bf,EAAE,CAACf,KAA7B,GAAqC,QAArC,GAAgDA,KAAhD,GAAwD,oBAAxD,GAA+EjD,MAAM,CAACgF,IAAP,CAAYhB,EAAE,CAACa,OAAf,EAAwBI,IAAxB,CAA6B,MAA7B,CAA/E,GAAsH,IAArI,CAAN;AACH;;AACDpB,MAAAA,MAAM,CAACb,IAAP,CAAYkC,KAAZ,CAAkBrB,MAAlB,EAA0BX,aAAa,CAAC0B,GAAG,CAAC3B,KAAL,EAAYG,OAAZ,EAAqBC,UAArB,EAAiCC,OAAjC,EAA0CC,MAA1C,EAAkDN,KAAK,IAAIe,EAAE,CAACyB,MAAH,IAAa,CAAjB,CAAvD,CAAvC;AACA;AACH;AACJ;;AACD,SAAOhD,YAAY,CAACoB,MAAD,CAAnB;AACH;AACD,OAAO,SAAS6B,cAAT,CAAwBvC,GAAxB,EAA6BC,OAA7B,EAAsCC,UAAtC,EAAkDC,OAAlD,EAA2DC,MAA3D,EACP;AACAE,eAFO,EAEU;AACb,MAAIf,KAAK,GAAGQ,aAAa,CAACC,GAAD,EAAMC,OAAN,EAAeC,UAAf,EAA2BC,OAA3B,EAAoCC,MAApC,EAA4Ce,SAA5C,EAAuDb,eAAvD,CAAzB,CADa,CAEb;;AACA,MAAIf,KAAK,CAAC3B,MAAN,KAAiB,CAArB,EAAwB;AACpB,WAAO2B,KAAK,CAAC,CAAD,CAAL,CAASO,KAAhB;AACH;;AACD,SAAOP,KAAK,CAACC,MAAN,CAAa,UAAUC,GAAV,EAAeC,IAAf,EAAqB;AAAE,WAAQD,GAAG,IAAIC,IAAI,CAACI,KAApB;AAA6B,GAAjE,EAAmE,EAAnE,CAAP;AACH,C,CACD;;AACA,IAAI0C,SAAJ;AACA,IAAIC,eAAe,GAAG,IAAtB;AACA,IAAIC,WAAW,GAAG,gBAAlB;AACA,IAAIC,OAAO,GAAG,CAAd;;AACA,SAASC,UAAT,GAAsB;AAClB,SAAOC,IAAI,CAACC,GAAL,KAAa,GAAb,GAAmB,EAAEH,OAA5B;AACH;;AACD,SAASI,6BAAT,CAAuCC,IAAvC,EAA6CC,WAA7C,EAA0D;AACtD,SAAOD,IAAI,CACNE,KADE,CACIR,WADJ,EAEFS,MAFE,CAEKC,OAFL,EAGFC,GAHE,CAGE,UAAUC,CAAV,EAAa;AAAE,WAAQL,WAAW,CAACK,CAAD,CAAX,IAAkB,IAAlB,GAAyBL,WAAW,CAACK,CAAD,CAApC,GAA0CA,CAAlD;AAAuD,GAHxE,EAIF9D,MAJE,CAIK,UAAUC,GAAV,EAAe6D,CAAf,EAAkB;AAC1B,QAAI,CAAC7D,GAAG,CAAC7B,MAAT,EAAiB;AACb6B,MAAAA,GAAG,CAACI,IAAJ,CAASyD,CAAT;AACH,KAFD,MAGK,IAAI,OAAOA,CAAP,KAAa,QAAb,IACL,OAAO7D,GAAG,CAACA,GAAG,CAAC7B,MAAJ,GAAa,CAAd,CAAV,KAA+B,QAD9B,EACwC;AACzC6B,MAAAA,GAAG,CAACA,GAAG,CAAC7B,MAAJ,GAAa,CAAd,CAAH,IAAuB0F,CAAvB;AACH,KAHI,MAIA;AACD7D,MAAAA,GAAG,CAACI,IAAJ,CAASyD,CAAT;AACH;;AACD,WAAO7D,GAAP;AACH,GAhBM,EAgBJ,EAhBI,CAAP;AAiBH;AACD;;;;;AAGA,IAAI8D,gBAAgB,GAAG,uEAAvB;AACA,IAAIC,WAAW,GAAGX,IAAI,CAACC,GAAL,KAAa,IAA/B;AACA,IAAIW,aAAa,GAAG,CAChB,MADgB,EAEhB,MAFgB,EAGhB,IAHgB,EAIhB,KAJgB,EAKhB,OALgB,EAMhB,IANgB,EAOhB,KAPgB,EAQhB,OARgB,EAShB,MATgB,EAUhB,MAVgB,EAWhB,OAXgB,EAYhB,QAZgB,EAahB,OAbgB,EAchB,KAdgB,CAApB;;AAgBA,SAASC,iBAAT,CAA2B7C,EAA3B,EAA+BoC,WAA/B,EAA4C7C,MAA5C,EAAoD;AAChD,MAAIuD,OAAO,GAAG9C,EAAE,CAAC8C,OAAjB;AACA,MAAIC,SAAS,GAAG/C,EAAE,CAAC+C,SAAnB;AAAA,MAA8BC,WAAW,GAAGhD,EAAE,CAACgD,WAA/C;AAAA,MAA4DC,UAAU,GAAGjD,EAAE,CAACiD,UAA5E,CAFgD,CAGhD;;AACA,MAAI,CAACH,OAAL,EAAc;AACV,WAAOZ,6BAA6B,CAACc,WAAW,IAAI,EAAhB,EAAoBZ,WAApB,CAApC;AACH;;AACDU,EAAAA,OAAO,GAAGA,OAAO,CAACI,WAAR,EAAV;AACA,MAAIC,aAAa,GAAG,CAACP,aAAa,CAACQ,OAAd,CAAsBN,OAAtB,CAArB;AACA,MAAIO,eAAe,GAAG9D,MAAM,CAACuD,OAAD,CAA5B;;AACA,MAAIO,eAAe,IAAIF,aAAvB,EAAsC;AAClC,UAAM,IAAIjF,WAAJ,CAAgB4E,OAAO,GAAG,0EAA1B,CAAN;AACH;;AACD,MAAI,CAACG,UAAU,CAAClG,MAAhB,EAAwB;AACpB,WAAO,CAACgG,SAAD,CAAP;AACH;;AACD,MAAIO,MAAM,GAAGnH,KAAK,CAACK,SAAN,CAAgB+G,KAAhB,CAAsBhF,IAAtB,CAA2B0E,UAA3B,EAAuCtE,MAAvC,CAA8C,UAAUC,GAAV,EAAe4E,KAAf,EAAsB;AAC7E,WAAO5E,GAAG,CAAC6E,MAAJ,CAAWZ,iBAAiB,CAACW,KAAD,EAAQpB,WAAR,EAAqB7C,MAArB,CAA5B,CAAP;AACH,GAFY,EAEV,EAFU,CAAb,CAhBgD,CAmBhD;;AACA,MAAI,CAAC8D,eAAL,EAAsB;AAClB,WAAO3G,cAAc,CAAC,CAAC,MAAMoG,OAAN,GAAgB,GAAjB,CAAD,EAAwBQ,MAAxB,EAAgC,CAAC,OAAOR,OAAP,GAAiB,GAAlB,CAAhC,CAArB;AACH,GAtB+C,CAuBhD;;;AACA,MAAI,OAAOO,eAAP,KAA2B,UAA/B,EAA2C;AACvC,WAAO,CAACA,eAAe,CAACnC,KAAhB,CAAsB,KAAK,CAA3B,EAA8BoC,MAA9B,CAAD,CAAP;AACH;;AACD,SAAO,CAACD,eAAD,CAAP;AACH;;AACD,OAAO,SAASK,iBAAT,CAA2BvE,GAA3B,EAAgCC,OAAhC,EAAyCC,UAAzC,EAAqDC,OAArD,EAA8DC,MAA9D,EACP;AACAE,eAFO,EAEU;AACb,MAAIf,KAAK,GAAGQ,aAAa,CAACC,GAAD,EAAMC,OAAN,EAAeC,UAAf,EAA2BC,OAA3B,EAAoCC,MAApC,EAA4Ce,SAA5C,EAAuDb,eAAvD,CAAzB;AACA,MAAI2C,WAAW,GAAG,EAAlB;AACA,MAAIuB,gBAAgB,GAAGjF,KAAK,CAACC,MAAN,CAAa,UAAUC,GAAV,EAAeC,IAAf,EAAqB;AACrD,QAAIA,IAAI,CAACE,IAAL,KAAc;AAAE;AAApB,MAAmC;AAC/B,eAAQH,GAAG,IAAIC,IAAI,CAACI,KAApB;AACH;;AACD,QAAI2E,EAAE,GAAG7B,UAAU,EAAnB;AACAK,IAAAA,WAAW,CAACwB,EAAD,CAAX,GAAkB/E,IAAI,CAACI,KAAvB;AACA,WAAQL,GAAG,IAAI,KAAKgD,eAAL,GAAuBgC,EAAvB,GAA4BhC,eAA3C;AACH,GAPsB,EAOpB,EAPoB,CAAvB,CAHa,CAWb;;AACA,MAAI,CAACc,gBAAgB,CAACmB,IAAjB,CAAsBF,gBAAtB,CAAL,EAA8C;AAC1C,WAAOzB,6BAA6B,CAACyB,gBAAD,EAAmBvB,WAAnB,CAApC;AACH;;AACD,MAAI,CAAC7C,MAAL,EAAa;AACT,UAAM,IAAIrB,WAAJ,CAAgB,kDAAhB,CAAN;AACH;;AACD,MAAI,OAAO4F,SAAP,KAAqB,WAAzB,EAAsC;AAClC,UAAM,IAAI5F,WAAJ,CAAgB,6CAAhB,CAAN;AACH;;AACD,MAAI,CAACyD,SAAL,EAAgB;AACZA,IAAAA,SAAS,GAAG,IAAImC,SAAJ,EAAZ;AACH;;AACD,MAAIC,OAAO,GAAGpC,SAAS,CAClBqC,eADS,CACO,6BAA6BrB,WAA7B,GAA2C,KAA3C,GAAmDgB,gBAAnD,GAAsE,sBAD7E,EACqG,WADrG,EAETM,cAFS,CAEMtB,WAFN,CAAd;;AAGA,MAAI,CAACoB,OAAL,EAAc;AACV,UAAM,IAAI7F,WAAJ,CAAgB,4BAA4ByF,gBAA5C,CAAN;AACH;;AACD,MAAIO,YAAY,GAAGlI,MAAM,CAACgF,IAAP,CAAYzB,MAAZ,EAAoB+C,MAApB,CAA2B,UAAUpC,OAAV,EAAmB;AAAE,WAAO,CAAC,CAAC6D,OAAO,CAACI,oBAAR,CAA6BjE,OAA7B,EAAsCnD,MAA/C;AAAwD,GAAxG,CAAnB,CA9Ba,CA+Bb;;AACA,MAAI,CAACmH,YAAY,CAACnH,MAAlB,EAA0B;AACtB,WAAOmF,6BAA6B,CAACyB,gBAAD,EAAmBvB,WAAnB,CAApC;AACH;;AACD,MAAIgC,iBAAiB,GAAGF,YAAY,CAAC5B,MAAb,CAAoB,UAAUQ,OAAV,EAAmB;AAAE,WAAOA,OAAO,KAAKA,OAAO,CAACI,WAAR,EAAnB;AAA2C,GAApF,CAAxB;;AACA,MAAIkB,iBAAiB,CAACrH,MAAtB,EAA8B;AAC1B,UAAM,IAAImB,WAAJ,CAAgB,iEAAiEkG,iBAAiB,CAACnD,IAAlB,CAAuB,IAAvB,CAAjF,CAAN;AACH,GAtCY,CAuCb;;;AACA,SAAO9E,KAAK,CAACK,SAAN,CAAgB+G,KAAhB,CACFhF,IADE,CACGwF,OAAO,CAACd,UADX,EAEFtE,MAFE,CAEK,UAAUC,GAAV,EAAe4E,KAAf,EAAsB;AAAE,WAAO5E,GAAG,CAAC6E,MAAJ,CAAWZ,iBAAiB,CAACW,KAAD,EAAQpB,WAAR,EAAqB7C,MAArB,CAA5B,CAAP;AAAmE,GAFhG,EAEkG,EAFlG,CAAP;AAGH","sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n            r[k] = a[j];\n    return r;\n};\nimport { convertNumberSkeletonToNumberFormatOptions, isArgumentElement, isDateElement, isDateTimeSkeleton, isLiteralElement, isNumberElement, isNumberSkeleton, isPluralElement, isSelectElement, isTimeElement, parseDateTimeSkeleton, } from 'intl-messageformat-parser';\nvar ESCAPE_HASH_REGEX = /\\\\#/g;\nvar PLURAL_HASH = /(^|[^\\\\])#/g;\nvar FormatError = /** @class */ (function (_super) {\n    __extends(FormatError, _super);\n    function FormatError(msg, variableId) {\n        var _this = _super.call(this, msg) || this;\n        _this.variableId = variableId;\n        return _this;\n    }\n    return FormatError;\n}(Error));\nfunction mergeLiteral(parts) {\n    if (parts.length < 2) {\n        return parts;\n    }\n    return parts.reduce(function (all, part) {\n        var lastPart = all[all.length - 1];\n        if (!lastPart ||\n            lastPart.type !== 0 /* literal */ ||\n            part.type !== 0 /* literal */) {\n            all.push(part);\n        }\n        else {\n            lastPart.value += part.value;\n        }\n        return all;\n    }, []);\n}\n// TODO(skeleton): add skeleton support\nexport function formatToParts(els, locales, formatters, formats, values, currentPluralValue, \n// For debugging\noriginalMessage) {\n    // Hot path for straight simple msg translations\n    if (els.length === 1 && isLiteralElement(els[0])) {\n        var value = els[0].value;\n        if (typeof currentPluralValue === 'number') {\n            value = value.replace(PLURAL_HASH, '$1' + formatters.getNumberFormat(locales).format(currentPluralValue));\n        }\n        return [\n            {\n                type: 0 /* literal */,\n                value: value.replace(ESCAPE_HASH_REGEX, '#'),\n            },\n        ];\n    }\n    var result = [];\n    for (var _i = 0, els_1 = els; _i < els_1.length; _i++) {\n        var el = els_1[_i];\n        // Exit early for string parts.\n        if (isLiteralElement(el)) {\n            var value_1 = el.value;\n            if (typeof currentPluralValue === 'number') {\n                value_1 = value_1.replace(PLURAL_HASH, '$1' + formatters.getNumberFormat(locales).format(currentPluralValue));\n            }\n            result.push({\n                type: 0 /* literal */,\n                value: value_1.replace(ESCAPE_HASH_REGEX, '#'),\n            });\n            continue;\n        }\n        var varName = el.value;\n        // Enforce that all required values are provided by the caller.\n        if (!(values && varName in values)) {\n            throw new FormatError(\"The intl string context variable \\\"\" + varName + \"\\\" was not provided to the string \\\"\" + originalMessage + \"\\\"\");\n        }\n        var value = values[varName];\n        if (isArgumentElement(el)) {\n            if (!value || typeof value === 'string' || typeof value === 'number') {\n                value =\n                    typeof value === 'string' || typeof value === 'number'\n                        ? String(value)\n                        : '';\n            }\n            result.push({\n                type: 1 /* argument */,\n                value: value,\n            });\n            continue;\n        }\n        // Recursively format plural and select parts' option â€” which can be a\n        // nested pattern structure. The choosing of the option to use is\n        // abstracted-by and delegated-to the part helper object.\n        if (isDateElement(el)) {\n            var style = typeof el.style === 'string' ? formats.date[el.style] : undefined;\n            result.push({\n                type: 0 /* literal */,\n                value: formatters\n                    .getDateTimeFormat(locales, style)\n                    .format(value),\n            });\n            continue;\n        }\n        if (isTimeElement(el)) {\n            var style = typeof el.style === 'string'\n                ? formats.time[el.style]\n                : isDateTimeSkeleton(el.style)\n                    ? parseDateTimeSkeleton(el.style.pattern)\n                    : undefined;\n            result.push({\n                type: 0 /* literal */,\n                value: formatters\n                    .getDateTimeFormat(locales, style)\n                    .format(value),\n            });\n            continue;\n        }\n        if (isNumberElement(el)) {\n            var style = typeof el.style === 'string'\n                ? formats.number[el.style]\n                : isNumberSkeleton(el.style)\n                    ? convertNumberSkeletonToNumberFormatOptions(el.style.tokens)\n                    : undefined;\n            result.push({\n                type: 0 /* literal */,\n                value: formatters\n                    .getNumberFormat(locales, style)\n                    .format(value),\n            });\n            continue;\n        }\n        if (isSelectElement(el)) {\n            var opt = el.options[value] || el.options.other;\n            if (!opt) {\n                throw new RangeError(\"Invalid values for \\\"\" + el.value + \"\\\": \\\"\" + value + \"\\\". Options are \\\"\" + Object.keys(el.options).join('\", \"') + \"\\\"\");\n            }\n            result.push.apply(result, formatToParts(opt.value, locales, formatters, formats, values));\n            continue;\n        }\n        if (isPluralElement(el)) {\n            var opt = el.options[\"=\" + value];\n            if (!opt) {\n                if (!Intl.PluralRules) {\n                    throw new FormatError(\"Intl.PluralRules is not available in this environment.\\nTry polyfilling it using \\\"@formatjs/intl-pluralrules\\\"\\n\");\n                }\n                var rule = formatters\n                    .getPluralRules(locales, { type: el.pluralType })\n                    .select(value - (el.offset || 0));\n                opt = el.options[rule] || el.options.other;\n            }\n            if (!opt) {\n                throw new RangeError(\"Invalid values for \\\"\" + el.value + \"\\\": \\\"\" + value + \"\\\". Options are \\\"\" + Object.keys(el.options).join('\", \"') + \"\\\"\");\n            }\n            result.push.apply(result, formatToParts(opt.value, locales, formatters, formats, values, value - (el.offset || 0)));\n            continue;\n        }\n    }\n    return mergeLiteral(result);\n}\nexport function formatToString(els, locales, formatters, formats, values, \n// For debugging\noriginalMessage) {\n    var parts = formatToParts(els, locales, formatters, formats, values, undefined, originalMessage);\n    // Hot path for straight simple msg translations\n    if (parts.length === 1) {\n        return parts[0].value;\n    }\n    return parts.reduce(function (all, part) { return (all += part.value); }, '');\n}\n// Singleton\nvar domParser;\nvar TOKEN_DELIMITER = '@@';\nvar TOKEN_REGEX = /@@(\\d+_\\d+)@@/g;\nvar counter = 0;\nfunction generateId() {\n    return Date.now() + \"_\" + ++counter;\n}\nfunction restoreRichPlaceholderMessage(text, objectParts) {\n    return text\n        .split(TOKEN_REGEX)\n        .filter(Boolean)\n        .map(function (c) { return (objectParts[c] != null ? objectParts[c] : c); })\n        .reduce(function (all, c) {\n        if (!all.length) {\n            all.push(c);\n        }\n        else if (typeof c === 'string' &&\n            typeof all[all.length - 1] === 'string') {\n            all[all.length - 1] += c;\n        }\n        else {\n            all.push(c);\n        }\n        return all;\n    }, []);\n}\n/**\n * Not exhaustive, just for sanity check\n */\nvar SIMPLE_XML_REGEX = /(<([0-9a-zA-Z-_]*?)>(.*?)<\\/([0-9a-zA-Z-_]*?)>)|(<[0-9a-zA-Z-_]*?\\/>)/;\nvar TEMPLATE_ID = Date.now() + '@@';\nvar VOID_ELEMENTS = [\n    'area',\n    'base',\n    'br',\n    'col',\n    'embed',\n    'hr',\n    'img',\n    'input',\n    'link',\n    'meta',\n    'param',\n    'source',\n    'track',\n    'wbr',\n];\nfunction formatHTMLElement(el, objectParts, values) {\n    var tagName = el.tagName;\n    var outerHTML = el.outerHTML, textContent = el.textContent, childNodes = el.childNodes;\n    // Regular text\n    if (!tagName) {\n        return restoreRichPlaceholderMessage(textContent || '', objectParts);\n    }\n    tagName = tagName.toLowerCase();\n    var isVoidElement = ~VOID_ELEMENTS.indexOf(tagName);\n    var formatFnOrValue = values[tagName];\n    if (formatFnOrValue && isVoidElement) {\n        throw new FormatError(tagName + \" is a self-closing tag and can not be used, please use another tag name.\");\n    }\n    if (!childNodes.length) {\n        return [outerHTML];\n    }\n    var chunks = Array.prototype.slice.call(childNodes).reduce(function (all, child) {\n        return all.concat(formatHTMLElement(child, objectParts, values));\n    }, []);\n    // Legacy HTML\n    if (!formatFnOrValue) {\n        return __spreadArrays([\"<\" + tagName + \">\"], chunks, [\"</\" + tagName + \">\"]);\n    }\n    // HTML Tag replacement\n    if (typeof formatFnOrValue === 'function') {\n        return [formatFnOrValue.apply(void 0, chunks)];\n    }\n    return [formatFnOrValue];\n}\nexport function formatHTMLMessage(els, locales, formatters, formats, values, \n// For debugging\noriginalMessage) {\n    var parts = formatToParts(els, locales, formatters, formats, values, undefined, originalMessage);\n    var objectParts = {};\n    var formattedMessage = parts.reduce(function (all, part) {\n        if (part.type === 0 /* literal */) {\n            return (all += part.value);\n        }\n        var id = generateId();\n        objectParts[id] = part.value;\n        return (all += \"\" + TOKEN_DELIMITER + id + TOKEN_DELIMITER);\n    }, '');\n    // Not designed to filter out aggressively\n    if (!SIMPLE_XML_REGEX.test(formattedMessage)) {\n        return restoreRichPlaceholderMessage(formattedMessage, objectParts);\n    }\n    if (!values) {\n        throw new FormatError('Message has placeholders but no values was given');\n    }\n    if (typeof DOMParser === 'undefined') {\n        throw new FormatError('Cannot format XML message without DOMParser');\n    }\n    if (!domParser) {\n        domParser = new DOMParser();\n    }\n    var content = domParser\n        .parseFromString(\"<formatted-message id=\\\"\" + TEMPLATE_ID + \"\\\">\" + formattedMessage + \"</formatted-message>\", 'text/html')\n        .getElementById(TEMPLATE_ID);\n    if (!content) {\n        throw new FormatError(\"Malformed HTML message \" + formattedMessage);\n    }\n    var tagsToFormat = Object.keys(values).filter(function (varName) { return !!content.getElementsByTagName(varName).length; });\n    // No tags to format\n    if (!tagsToFormat.length) {\n        return restoreRichPlaceholderMessage(formattedMessage, objectParts);\n    }\n    var caseSensitiveTags = tagsToFormat.filter(function (tagName) { return tagName !== tagName.toLowerCase(); });\n    if (caseSensitiveTags.length) {\n        throw new FormatError(\"HTML tag must be lowercased but the following tags are not: \" + caseSensitiveTags.join(', '));\n    }\n    // We're doing this since top node is `<formatted-message/>` which does not have a formatter\n    return Array.prototype.slice\n        .call(content.childNodes)\n        .reduce(function (all, child) { return all.concat(formatHTMLElement(child, objectParts, values)); }, []);\n}\n"]},"metadata":{},"sourceType":"module"}